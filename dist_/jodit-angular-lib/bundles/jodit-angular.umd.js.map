{"version":3,"file":"jodit-angular.umd.js","sources":["ng://jodit-angular/lib/Events.ts","ng://jodit-angular/lib/jodit-angular.component.ts","ng://jodit-angular/lib/jodit-angular.module.ts"],"sourcesContent":["import {Output, EventEmitter} from '@angular/core';\r\n\r\nexport interface EventObj {\r\n  args: any[];\r\n  editor: any;\r\n}\r\n\r\nexport class Events {\r\n  // tslint:disable:no-output-on-prefix\r\n  @Output() onChange: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onBeforeEnter: EventEmitter<EventObj> = new EventEmitter(false);\r\n  @Output() onKeydown: EventEmitter<EventObj> = new EventEmitter(false);\r\n  @Output() onMousedown: EventEmitter<EventObj> = new EventEmitter(false);\r\n  @Output() onClick: EventEmitter<EventObj> = new EventEmitter(false);\r\n  @Output() onFocus: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onBlur: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onPaste: EventEmitter<EventObj> = new EventEmitter(false);\r\n  @Output() onResize: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onBeforeCommand: EventEmitter<EventObj> = new EventEmitter(false);\r\n  @Output() onAfterCommand: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onAfterExec: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onAfterPaste: EventEmitter<EventObj> = new EventEmitter();\r\n  @Output() onChangeSelection: EventEmitter<EventObj> = new EventEmitter();\r\n}\r\n\r\n\r\nexport const validEvents: (keyof Events)[] = [\r\n  'onChange',\r\n  'onBeforeEnter',\r\n  'onKeydown',\r\n  'onMousedown',\r\n  'onClick',\r\n  'onFocus',\r\n  'onBlur',\r\n  'onPaste',\r\n  'onResize',\r\n  'onBeforeCommand',\r\n  'onAfterCommand',\r\n  'onAfterExec',\r\n  'onAfterPaste',\r\n  'onChangeSelection',\r\n];\r\n","import {\r\n    AfterViewInit,\r\n    Component,\r\n    ElementRef,\r\n    EventEmitter,\r\n    forwardRef,\r\n    Input,\r\n    NgZone,\r\n    OnDestroy,\r\n    Provider,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {Events, validEvents} from './Events';\r\n\r\n\r\ndeclare const require: any;\r\nconst EditorModule: any = require('jodit');\r\n\r\n\r\nconst CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR: Provider = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => JoditAngularComponent),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'jodit-editor',\r\n    template: `\r\n        <ng-template></ng-template>`,\r\n    encapsulation: ViewEncapsulation.None,\r\n    styleUrls: ['../../../../node_modules/jodit/build/jodit.min.css'],\r\n    providers: [CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR]\r\n})\r\nexport class JoditAngularComponent extends Events implements AfterViewInit, OnDestroy, ControlValueAccessor {\r\n\r\n    @Input()\r\n    set config(v: object | undefined) {\r\n        this._config = v;\r\n        if (this.element) {\r\n            this.resetEditor();\r\n        }\r\n    }\r\n\r\n    get config() {\r\n        return this._config;\r\n    }\r\n\r\n    private _config = {};\r\n\r\n    @Input() tagName = 'textarea';\r\n    @Input() id: string | undefined;\r\n    @Input() defaultValue: string | undefined;\r\n\r\n    element: HTMLInputElement;\r\n    editor: any;\r\n\r\n    private onChangeCallback: (_: any) => {};\r\n    private onTouchedCallback: () => {};\r\n\r\n    constructor(private elementRef: ElementRef, private ngZone: NgZone) {\r\n        super();\r\n        this.elementRef = elementRef;\r\n        this.ngZone = ngZone;\r\n    }\r\n\r\n    createElement() {\r\n        const tagName = typeof this.tagName === 'string' ? this.tagName : 'textarea';\r\n        this.element = <HTMLInputElement>document.createElement(tagName);\r\n        if (this.element) {\r\n            this.element.id = this.id; \r\n            this.element[\"value\"] = this.defaultValue;\r\n            this.elementRef.nativeElement.appendChild(this.element);\r\n        }\r\n    }\r\n\r\n\r\n    get value(): string {\r\n        if (this.editor) {\r\n            return this.editor.getEditorValue();\r\n        } else {\r\n            return '';\r\n        }\r\n    }\r\n\r\n    set value(v: string) {\r\n        if (this.editor) {\r\n            this.editor.setEditorValue(v || '');\r\n        } else {\r\n            this.defaultValue = v;\r\n        }\r\n    }\r\n\r\n    resetEditor() {\r\n        this.editor.destruct();\r\n        this.createEditor();\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (!this.element) {\r\n            this.createElement();\r\n            this.createEditor();\r\n        }\r\n    }\r\n\r\n    createEditor() {\r\n        // Create instance outside Angular scope\r\n        this.ngZone.runOutsideAngular(() => {\r\n            this.editor = new EditorModule.Jodit(this.element, this.config);\r\n        });\r\n\r\n        if (this.defaultValue) {\r\n            this.editor.value = this.defaultValue;\r\n        }\r\n\r\n        this.editor.events\r\n            .on('change', (value: string) => {\r\n                if (typeof this.onChangeCallback === 'function') {\r\n                    this.ngZone.run(() => this.onChangeCallback(value));\r\n                }\r\n            })\r\n            .on('blur', () => {\r\n                if (typeof this.onTouchedCallback === 'function') {\r\n                    this.ngZone.run(() => this.onTouchedCallback());\r\n                }\r\n            });\r\n\r\n\r\n        validEvents.forEach((eventName) => {\r\n            const eventEmitter: EventEmitter<any> = this[eventName];\r\n            if (eventEmitter.observers.length > 0) {\r\n                let eventNameInJodit = eventName.substring(2);\r\n                eventNameInJodit = eventNameInJodit.substr(0, 1).toLowerCase() + eventNameInJodit.substring(1);\r\n                // tslint:disable-next-line:max-line-length\r\n                this.editor.events.on(eventNameInJodit, this.ngZone.run(() => (...args: any[]) => eventEmitter.emit({\r\n                    args,\r\n                    editor: this.editor\r\n                })));\r\n            }\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.editor) {\r\n            this.editor.destruct();\r\n        }\r\n    }\r\n\r\n    writeValue(v: any): void {\r\n        this.value = v;\r\n    }\r\n\r\n    registerOnChange(fn: any): void {\r\n        this.onChangeCallback = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: () => {}): void {\r\n        this.onTouchedCallback = fn;\r\n    }\r\n\r\n    setDisabledState(isDisabled: boolean): void {\r\n        this.editor.setReadOnly(isDisabled);\r\n    }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { JoditAngularComponent } from './jodit-angular.component';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [JoditAngularComponent],\r\n  exports: [\r\n      JoditAngularComponent\r\n  ]\r\n})\r\n\r\nexport class JoditAngularModule { }\r\n"],"names":["EventEmitter","Output","NG_VALUE_ACCESSOR","forwardRef","Component","ViewEncapsulation","ElementRef","NgZone","Input","NgModule","CommonModule"],"mappings":"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"}